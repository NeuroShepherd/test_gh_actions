name: deploy-site

on:
  workflow_dispatch:
  push:
    branches: [master]



jobs:
  redeploy-site:
    runs-on: ubuntu-latest
    steps:

      - uses: actions/checkout@v3
      - uses: r-lib/actions/setup-r@v2
      - uses: r-lib/actions/setup-renv@v2
      - uses: r-lib/actions/setup-pandoc@v2


      - name: Build book
        run: |
          system('mkdir -p docs')
          bookdown::render_book("index.Rmd", quiet = TRUE, output_dir = 'docs')
        shell: Rscript {0}

